(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(2),a=n.n(c),u=n(16),s=n.n(u),i=(n(22),n(3)),o=n.n(i),l=n(5),d=n(4),f=(n(24),n(6)),b=n.n(f),j="/api/persons",p=function(e){return b.a.delete("".concat(j,"/").concat(e))},m=function(e){var t=e.filter,n=e.setFilter;return Object(r.jsxs)("div",{children:["filter shown with",Object(r.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},h=function(e){var t=e.addPerson,n=e.newName,c=e.setNewName,a=e.newNumber,u=e.setNewNumber;return Object(r.jsxs)("form",{onSubmit:function(e){return t(e)},children:[Object(r.jsxs)("div",{children:["name:",Object(r.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)}})]}),Object(r.jsxs)("div",{children:["number:",Object(r.jsx)("input",{value:a,onChange:function(e){return u(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var t=e.persons,n=e.filter,c=e.deletePerson;return t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[e.name," ",e.number]}),Object(r.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.id)}))},O=function(e){var t=e.message,n=e.type;return null===t?null:Object(r.jsx)("div",{className:"notification ".concat(n),children:t})},x=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],u=Object(c.useState)(""),s=Object(d.a)(u,2),i=s[0],f=s[1],x=Object(c.useState)(""),w=Object(d.a)(x,2),k=w[0],N=w[1],g=Object(c.useState)(""),y=Object(d.a)(g,2),S=y[0],C=y[1],P=Object(c.useState)(null),T=Object(d.a)(P,2),D=T[0],A=T[1],E=Object(c.useState)(""),F=Object(d.a)(E,2),I=F[0],J=F[1];Object(c.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(j);case 2:t=e.sent,n=t.data,a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var L=function(){var e=Object(l.a)(o.a.mark((function e(t){var r,c,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r={name:i,number:k},!(c=n.find((function(e){return e.name===i})))){e.next=7;break}window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?"))&&B(c,r),e.next=23;break;case 7:return e.prev=7,e.next=10,o=r,b.a.post(j,o);case 10:u=e.sent,s=u.data,a(n.concat(s)),f(""),N(""),A("Added ".concat(s.name)),J("success"),setTimeout((function(){A(null),J("")}),5e3),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0);case 23:case"end":return e.stop()}var o}),e,null,[[7,20]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(o.a.mark((function e(t,r){var c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s=t.id,i=r,b.a.put("".concat(j,"/").concat(s),i);case 3:c=e.sent,u=c.data,a(n.map((function(e){return e.id!==t.id?e:u}))),f(""),N(""),A("Updated ".concat(u.name)),J("success"),setTimeout((function(){A(null),J("")}),5e3),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),A("Information of ".concat(t.name," has already been removed from server")),J("error"),setTimeout((function(){A(null),J("")}),5e3),a(n.filter((function(e){return e.id!==t.id})));case 19:case"end":return e.stop()}var s,i}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(o.a.mark((function e(t){var r,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,c=t.name,!window.confirm("Delete ".concat(c," ?"))){e.next=14;break}return e.prev=2,e.next=5,p(r);case 5:u=n.filter((function(e){return e.id!==r})),a(u),A("Deleted ".concat(c)),J("success"),setTimeout((function(){A(null),J("")}),5e3),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(O,{message:D,type:I}),Object(r.jsx)(m,{filter:S,setFilter:C}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(h,{addPerson:L,newName:i,setNewName:f,newNumber:k,setNewNumber:N}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(v,{persons:n,filter:S,deletePerson:M})]})};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a25a6c79.chunk.js.map